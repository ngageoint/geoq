(function(){var b={monthsOfYear:[gettext("January"),gettext("February"),gettext("March"),gettext("April"),gettext("May"),gettext("June"),gettext("July"),gettext("August"),gettext("September"),gettext("October"),gettext("November"),gettext("December")],daysOfWeek:[pgettext("one letter Sunday","S"),pgettext("one letter Monday","M"),pgettext("one letter Tuesday","T"),pgettext("one letter Wednesday","W"),pgettext("one letter Thursday","T"),pgettext("one letter Friday","F"),pgettext("one letter Saturday","S")],firstDayOfWeek:parseInt(get_format("FIRST_DAY_OF_WEEK")),isLeapYear:function(c){return(((c%4)===0)&&((c%100)!==0)||((c%400)===0))},getDaysInMonth:function(d,c){var e;if(d===1||d===3||d===5||d===7||d===8||d===10||d===12){e=31}else{if(d===4||d===6||d===9||d===11){e=30}else{if(d===2&&b.isLeapYear(c)){e=29}else{e=28}}}return e},draw:function(x,o,s,j,q){var v=new Date();var w=v.getDate();var p=v.getMonth()+1;var n=v.getFullYear();var f="";var y=false;if(typeof q!=="undefined"){y=(q.getUTCFullYear()===o&&(q.getUTCMonth()+1)===x)}x=parseInt(x);o=parseInt(o);var u=document.getElementById(s);removeChildren(u);var c=document.createElement("table");quickElement("caption",c,b.monthsOfYear[x-1]+" "+o);var r=quickElement("tbody",c);var z=quickElement("tr",r);for(var t=0;t<7;t++){quickElement("th",z,b.daysOfWeek[(t+b.firstDayOfWeek)%7])}var h=new Date(o,x-1,1-b.firstDayOfWeek).getDay();var k=b.getDaysInMonth(x,o);var g;z=quickElement("tr",r);for(t=0;t<h;t++){g=quickElement("td",z," ");g.className="nonday"}function e(B,i){function A(C){C.preventDefault();j(B,i,django.jQuery(this).text())}return A}var m=1;for(t=h;m<=k;t++){if(t%7===0&&m!==1){z=quickElement("tr",r)}if((m===w)&&(x===p)&&(o===n)){f="today"}else{f=""}if(y&&m===q.getUTCDate()){if(f!==""){f+=" "}f+="selected"}var d=quickElement("td",z,"","class",f);var l=quickElement("a",d,m,"href","#");addEvent(l,"click",e(o,x));m++}while(z.childNodes.length<7){g=quickElement("td",z," ");g.className="nonday"}u.appendChild(c)}};function a(d,e,c){this.div_id=d;this.callback=e;this.today=new Date();this.currentMonth=this.today.getMonth()+1;this.currentYear=this.today.getFullYear();if(typeof c!=="undefined"){this.selected=c}}a.prototype={drawCurrent:function(){b.draw(this.currentMonth,this.currentYear,this.div_id,this.callback,this.selected)},drawDate:function(e,d,c){this.currentMonth=e;this.currentYear=d;if(c){this.selected=c}this.drawCurrent()},drawPreviousMonth:function(){if(this.currentMonth===1){this.currentMonth=12;this.currentYear--}else{this.currentMonth--}this.drawCurrent()},drawNextMonth:function(){if(this.currentMonth===12){this.currentMonth=1;this.currentYear++}else{this.currentMonth++}this.drawCurrent()},drawPreviousYear:function(){this.currentYear--;this.drawCurrent()},drawNextYear:function(){this.currentYear++;this.drawCurrent()}};window.Calendar=a})();